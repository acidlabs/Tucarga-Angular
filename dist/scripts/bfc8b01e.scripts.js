"use strict";angular.module("tucargaApp",["ngCookies","ngResource","ngSanitize","ngRoute","platanus.rut"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html"}).when("/como_funciona",{templateUrl:"views/como.html"}).when("/ayuda",{templateUrl:"views/ayuda.html"}).when("/contacto",{templateUrl:"views/contacto.html"}).when("/directorio",{templateUrl:"views/directorio.html",controller:"DirectorioController"}).when("/exito",{templateUrl:"views/exito.html"}).when("/terminos",{templateUrl:"views/terminos.html"}).when("/cotizar/exito",{templateUrl:"views/exito.html"}).when("/cotizar/usuario",{templateUrl:"views/cotizar/usuario.html"}).when("/cotizar",{templateUrl:"views/cotizar.html"}).when("/cotizar/importacion",{templateUrl:"views/cotizar/importacion.html",controller:"ImpoController"}).when("/cotizar/exportacion",{templateUrl:"views/cotizar/exportacion.html",controller:"ExpoController"}).when("/cotizar/domestica",{templateUrl:"views/cotizar/domestica.html",controller:"DomesticaController"}).when("/cotizar/contenedor",{templateUrl:"views/cotizar/contenedor.html",controller:"ContenedorController"}).otherwise({redirectTo:"/"})}]),angular.module("tucargaApp").controller("MainController",["$scope",function(a){a.awesomeThings=[{question:"asdf",pubDate:"12-2"},{question:"asdrytu",pubDate:"12-2"},{question:"qwer",pubDate:"12-2"},{question:"l√±ki",pubDate:"12-2"}]}]),angular.module("tucargaApp").controller("PollsController",["$scope","$http",function(a,b){a.formData={},a.processForm=function(){b({method:"POST",url:"http://127.0.0.1:8000/directory/freightfirststep/",data:a.formData,headers:{"Content-Type":"application/json"}}).success(function(a){console.log(a)}).error(function(a){console.log(a)})}}]),angular.module("tucargaApp").filter("startFrom",function(){return function(a,b){return b=+b,a.slice(b)}}),angular.module("tucargaApp").controller("DirectorioController",["$scope","$http",function(a,b){a.loading=!0,b({method:"GET",url:"http://127.0.0.1:8000/directory/transportcompany/",headers:{"Content-Type":"application/json"}}).success(function(b){console.log("nice"),a.directory=b,a.currentPage=0,a.pageSize=10,a.loading=!1,a.numberOfPages=function(){return Math.ceil(a.directory.length/a.pageSize)}}).error(function(a){console.log(a)})}]),angular.module("tucargaApp").controller("ImpoController",["$scope","$http","$location",function(a,b,c){b({method:"GET",url:"http://127.0.0.1:8000/directory/region/",headers:{"Content-Type":"application/json"}}).success(function(b){a.selectRegion=b}).error(function(){}),b({method:"GET",url:"http://127.0.0.1:8000/directory/freighttype/",headers:{"Content-Type":"application/json"}}).success(function(b){a.returnFreightType=b}).error(function(){}),b({method:"GET",url:"http://127.0.0.1:8000/directory/containertype/",headers:{"Content-Type":"application/json"}}).success(function(b){a.returncContainerType=b}).error(function(){}),b({method:"GET",url:"http://127.0.0.1:8000/directory/trucktype/",headers:{"Content-Type":"application/json"}}).success(function(b){a.returnTruckType=b}).error(function(){}),b({method:"GET",url:"http://127.0.0.1:8000/directory/equipment/",headers:{"Content-Type":"application/json"}}).success(function(b){a.returnEquipment=b}).error(function(){}),a.freightwaypoint_destination=function(){b({method:"GET",url:"http://127.0.0.1:8000/directory/commune/"+a.freightwaypoint_destination_region+"/",headers:{"Content-Type":"application/json"}}).success(function(b){a.returnCommuneA=b}).error(function(){})},a.freightlocation_region=function(){b({method:"GET",url:"http://127.0.0.1:8000/directory/commune/"+a.freightlocationRegion+"/",headers:{"Content-Type":"application/json"}}).success(function(b){a.returnCommuneB=b}).error(function(){})},a.freightwaypoint_origin_date_hour="T00:00",a.total_freightwaypoint_origin_date=function(){return a.freightwaypoint_origin_date_day+a.freightwaypoint_origin_date_hour},a.total_freightwaypoint_destination_from_date=function(){return a.freightwaypoint_destination_from_date_day+"T"+a.freightwaypoint_destination_from_date_hour},a.otherInfo=function(){return a.otherOne+","+a.otherTwo+","+a.otherThree},a.userPhone=function(){return a.userPhonePrefix+a.userPhoneNumber},a.userMobile=function(){return a.userMobilePrefix+a.userMobileNumber},a.businessPhone=function(){return a.businessPhonePrefix+a.businessPhoneNumber},a.conditions=function(){return a.tiempoPago+", "+a.pagoDesde},a.storageFuncton=function(){return"true"==a.addNeedStorage?(a.storageState="false","Si, Dias: "+a.needs_storage_days+", Descripcion: "+a.needs_storage_string):"false"==a.addNeedStorage?"No":void 0},a.formData={},a.submitted=!1,a.email=function(){b({method:"GET",url:"http://127.0.0.1:8000/directory/user/"+a.formData.contact_email,headers:{"Content-Type":"application/json"}}).success(function(b){a.infoUser=b,a.userDisable=function(){return!0},a.isUserValid=function(){return!1},$(".status-mail.valid").removeClass("none"),$(".status-mail.invalid").addClass("none"),$(".status-mail.nothing").addClass("none")}).error(function(){a.userDisable=function(){return!1},a.isUserValid=function(){return!0},$(".status-mail.invalid").removeClass("none"),$(".status-mail.valid").addClass("none"),$(".status-mail.nothing").addClass("none")})},a.freightPost=function(){a.formData.obj_type="impo",a.formData.freightwaypoint_origin_from_date=a.total_freightwaypoint_origin_date(),a.formData.freightwaypoint_destination_from_date=a.total_freightwaypoint_destination_from_date(),a.formData.needs_storage=a.storageFuncton(),a.formData.reason=a.otherInfo(),a.formData.service_conditions=a.conditions(),a.formData.company_phone=a.businessPhone(),a.formData.userdirectory_mobile=a.userMobile(),a.formData.userdirectory_phone=a.userPhone(),a.cargaForm.$valid?b({method:"POST",url:"http://127.0.0.1:8000/directory/freightfirststep/",data:a.formData,headers:{"Content-Type":"application/json"}}).success(function(){c.url("/cotizar/exito")}).error(function(){}):(a.cargaForm.submitted=!0,$(".form-status").removeClass("none"))}}]),angular.module("tucargaApp").controller("ExpoController",["$scope","$http","$location",function(a,b,c){b({method:"GET",url:"http://127.0.0.1:8000/directory/region/",headers:{"Content-Type":"application/json"}}).success(function(b){a.selectRegion=b}).error(function(){}),b({method:"GET",url:"http://127.0.0.1:8000/directory/freighttype/",headers:{"Content-Type":"application/json"}}).success(function(b){a.returnFreightType=b}).error(function(){}),b({method:"GET",url:"http://127.0.0.1:8000/directory/containertype/",headers:{"Content-Type":"application/json"}}).success(function(b){a.returncContainerType=b}).error(function(){}),b({method:"GET",url:"http://127.0.0.1:8000/directory/trucktype/",headers:{"Content-Type":"application/json"}}).success(function(b){a.returnTruckType=b}).error(function(){}),b({method:"GET",url:"http://127.0.0.1:8000/directory/equipment/",headers:{"Content-Type":"application/json"}}).success(function(b){a.returnEquipment=b}).error(function(){}),a.withdrawCommune=function(){b({method:"GET",url:"http://127.0.0.1:8000/directory/commune/"+a.withdrawRegion+"/",headers:{"Content-Type":"application/json"}}).success(function(b){a.returnCommuneA=b}).error(function(){})},a.freightwaypointOriginRegion=function(){b({method:"GET",url:"http://127.0.0.1:8000/directory/commune/"+a.formData.freightwaypoint_origin_region+"/",headers:{"Content-Type":"application/json"}}).success(function(b){a.returnCommuneB=b}).error(function(){})},a.total_freightwaypoint_origin_date=function(){return a.freightwaypoint_origin_date_day+"T"+a.freightwaypoint_origin_date_hour},a.freightwaypoint_destination_from_date_hour="T00:00",a.total_freightwaypoint_destination_from_date=function(){return a.freightwaypoint_destination_from_date_day+a.freightwaypoint_destination_from_date_hour},a.otherInfo=function(){return a.otherOne+","+a.otherTwo+","+a.otherThree},a.userPhone=function(){return a.userPhonePrefix+a.userPhoneNumber},a.userMobile=function(){return a.userMobilePrefix+a.userMobileNumber},a.businessPhone=function(){return a.businessPhonePrefix+a.businessPhoneNumber},a.conditions=function(){return a.tiempoPago+", "+a.pagoDesde},a.storageFuncton=function(){return"true"==a.addNeedStorage?(a.storageState="false","Si, Dias: "+a.needs_storage_days+", Descripcion: "+a.needs_storage_string):"false"==a.addNeedStorage?"No":void 0},a.formData={},a.submitted=!1,a.email=function(){b({method:"GET",url:"http://127.0.0.1:8000/directory/user/"+a.formData.contact_email,headers:{"Content-Type":"application/json"}}).success(function(b){a.infoUser=b,a.userDisable=function(){return!0},a.isUserValid=function(){return!1},$(".status-mail.valid").removeClass("none"),$(".status-mail.invalid").addClass("none"),$(".status-mail.nothing").addClass("none")}).error(function(){a.userDisable=function(){return!1},a.isUserValid=function(){return!0},$(".status-mail.invalid").removeClass("none"),$(".status-mail.valid").addClass("none"),$(".status-mail.nothing").addClass("none")})},a.freightPost=function(){a.formData.obj_type="expo",a.formData.freightwaypoint_origin_from_date=a.total_freightwaypoint_origin_date(),a.formData.freightwaypoint_destination_from_date=a.total_freightwaypoint_destination_from_date(),a.formData.needs_storage=a.storageFuncton(),a.formData.reason=a.otherInfo(),a.formData.service_conditions=a.conditions(),a.formData.company_phone=a.businessPhone(),a.formData.userdirectory_mobile=a.userMobile(),a.formData.userdirectory_phone=a.userPhone(),a.cargaForm.$valid?b({method:"POST",url:"http://127.0.0.1:8000/directory/freightfirststep/",data:a.formData,headers:{"Content-Type":"application/json"}}).success(function(){c.url("/cotizar/exito")}).error(function(){}):(a.cargaForm.submitted=!0,$(".form-status").removeClass("none"))}}]),angular.module("tucargaApp").controller("DomesticaController",["$scope","$http","$location",function(a,b,c){b({method:"GET",url:"http://127.0.0.1:8000/directory/region/",headers:{"Content-Type":"application/json"}}).success(function(b){a.selectRegion=b}).error(function(){}),b({method:"GET",url:"http://127.0.0.1:8000/directory/freighttype/",headers:{"Content-Type":"application/json"}}).success(function(b){a.returnFreightType=b}).error(function(){}),b({method:"GET",url:"http://127.0.0.1:8000/directory/containertype/",headers:{"Content-Type":"application/json"}}).success(function(b){a.returncContainerType=b}).error(function(){}),b({method:"GET",url:"http://127.0.0.1:8000/directory/trucktype/",headers:{"Content-Type":"application/json"}}).success(function(b){a.returnTruckType=b}).error(function(){}),b({method:"GET",url:"http://127.0.0.1:8000/directory/equipment/",headers:{"Content-Type":"application/json"}}).success(function(b){a.returnEquipment=b}).error(function(){}),a.freightwaypointOriginRegion=function(){b({method:"GET",url:"http://127.0.0.1:8000/directory/commune/"+a.formData.freightwaypoint_origin_region+"/",headers:{"Content-Type":"application/json"}}).success(function(b){a.returnCommuneB=b}).error(function(){})},a.freightwaypoint_destination=function(){b({method:"GET",url:"http://127.0.0.1:8000/directory/commune/"+a.freightwaypoint_destination_region+"/",headers:{"Content-Type":"application/json"}}).success(function(b){a.returnCommuneA=b}).error(function(){})},a.total_freightwaypoint_origin_date=function(){return a.freightwaypoint_origin_date_day+"T"+a.freightwaypoint_origin_date_hour},a.total_freightwaypoint_destination_from_date=function(){return a.freightwaypoint_destination_from_date_day+"T"+a.freightwaypoint_destination_from_date_hour},a.otherInfo=function(){return a.otherOne+","+a.otherTwo+","+a.otherThree},a.userPhone=function(){return a.userPhonePrefix+a.userPhoneNumber},a.userMobile=function(){return a.userMobilePrefix+a.userMobileNumber},a.businessPhone=function(){return a.businessPhonePrefix+a.businessPhoneNumber},a.conditions=function(){return a.tiempoPago+", "+a.pagoDesde},a.storageFuncton=function(){return"true"==a.addNeedStorage?(a.storageState="false","Si, Dias: "+a.needs_storage_days+", Descripcion: "+a.needs_storage_string):"false"==a.addNeedStorage?"No":void 0},a.formData={},a.submitted=!1,a.email=function(){b({method:"GET",url:"http://127.0.0.1:8000/directory/user/"+a.formData.contact_email,headers:{"Content-Type":"application/json"}}).success(function(b){a.infoUser=b,a.userDisable=function(){return!0},a.isUserValid=function(){return!1},$(".status-mail.valid").removeClass("none"),$(".status-mail.invalid").addClass("none"),$(".status-mail.nothing").addClass("none")}).error(function(){a.userDisable=function(){return!1},a.isUserValid=function(){return!0},$(".status-mail.invalid").removeClass("none"),$(".status-mail.valid").addClass("none"),$(".status-mail.nothing").addClass("none")})},a.freightPost=function(){a.formData.obj_type="expo",a.formData.freightwaypoint_origin_from_date=a.total_freightwaypoint_origin_date(),a.formData.freightwaypoint_destination_from_date=a.total_freightwaypoint_destination_from_date(),a.formData.needs_storage=a.storageFuncton(),a.formData.reason=a.otherInfo(),a.formData.service_conditions=a.conditions(),a.formData.company_phone=a.businessPhone(),a.formData.userdirectory_mobile=a.userMobile(),a.formData.userdirectory_phone=a.userPhone(),a.cargaForm.$valid?b({method:"POST",url:"http://127.0.0.1:8000/directory/freightfirststep/",data:a.formData,headers:{"Content-Type":"application/json"}}).success(function(){c.url("/cotizar/exito")}).error(function(){}):(a.cargaForm.submitted=!0,$(".form-status").removeClass("none"))}}]),angular.module("tucargaApp").controller("ContenedorController",["$scope","$http","$location",function(a,b,c){b({method:"GET",url:"http://127.0.0.1:8000/directory/region/",headers:{"Content-Type":"application/json"}}).success(function(b){a.selectRegion=b}).error(function(){}),b({method:"GET",url:"http://127.0.0.1:8000/directory/freighttype/",headers:{"Content-Type":"application/json"}}).success(function(b){a.returnFreightType=b}).error(function(){}),b({method:"GET",url:"http://127.0.0.1:8000/directory/containertype/",headers:{"Content-Type":"application/json"}}).success(function(b){a.returncContainerType=b}).error(function(){}),b({method:"GET",url:"http://127.0.0.1:8000/directory/trucktype/",headers:{"Content-Type":"application/json"}}).success(function(b){a.returnTruckType=b}).error(function(){}),b({method:"GET",url:"http://127.0.0.1:8000/directory/equipment/",headers:{"Content-Type":"application/json"}}).success(function(b){a.returnEquipment=b}).error(function(){}),a.withdrawCommune=function(){b({method:"GET",url:"http://127.0.0.1:8000/directory/commune/"+a.withdrawRegion+"/",headers:{"Content-Type":"application/json"}}).success(function(b){a.returnCommuneA=b}).error(function(){})},a.freightlocation_region=function(){b({method:"GET",url:"http://127.0.0.1:8000/directory/commune/"+a.freightlocationRegion+"/",headers:{"Content-Type":"application/json"}}).success(function(b){a.returnCommuneB=b}).error(function(){})},a.freightlocation_withdraw_from_date_hour="T00:00",a.total_freightlocation_withdraw_from_date=function(){return a.freightlocation_withdraw_from_date_day+a.freightlocation_withdraw_from_date_hour},a.freightlocation_return_to_date_hour="T00:00",a.total_freightlocation_return_to_date=function(){return a.freightlocation_return_to_date_day+a.freightlocation_return_to_date_hour},a.otherInfo=function(){return a.otherOne+","+a.otherTwo+","+a.otherThree},a.userPhone=function(){return a.userPhonePrefix+a.userPhoneNumber},a.userMobile=function(){return a.userMobilePrefix+a.userMobileNumber},a.businessPhone=function(){return a.businessPhonePrefix+a.businessPhoneNumber},a.conditions=function(){return a.tiempoPago+", "+a.pagoDesde},a.formData={},a.submitted=!1,a.email=function(){b({method:"GET",url:"http://127.0.0.1:8000/directory/user/"+a.formData.contact_email,headers:{"Content-Type":"application/json"}}).success(function(b){a.infoUser=b,a.userDisable=function(){return!0},a.isUserValid=function(){return!1},$(".status-mail.valid").removeClass("none"),$(".status-mail.invalid").addClass("none"),$(".status-mail.nothing").addClass("none")}).error(function(){a.userDisable=function(){return!1},a.isUserValid=function(){return!0},$(".status-mail.invalid").removeClass("none"),$(".status-mail.valid").addClass("none"),$(".status-mail.nothing").addClass("none")})},a.freightPost=function(){a.formData.obj_type="empt",a.formData.freightlocation_withdraw_from_date=a.total_freightlocation_withdraw_from_date(),a.formData.freightlocation_return_to_date=a.total_freightlocation_return_to_date(),a.formData.reason=a.otherInfo(),a.formData.service_conditions=a.conditions(),a.formData.company_phone=a.businessPhone(),a.formData.userdirectory_mobile=a.userMobile(),a.formData.userdirectory_phone=a.userPhone(),a.cargaForm.$valid?b({method:"POST",url:"http://127.0.0.1:8000/directory/freightfirststep/",data:a.formData,headers:{"Content-Type":"application/json"}}).success(function(){c.url("/cotizar/exito")}).error(function(){}):(a.cargaForm.submitted=!0,$(".form-status").removeClass("none"))}}]),angular.module("tucargaApp").controller("FormController",["$scope","$http","$location",function(a,b,c){a.formData={},a.submitted=!1,a.add_needs_storage=function(){return"Si, "+a.needs_storage_string},a.otherInfo=function(){return a.otherOne+","+a.otherTwo+","+a.otherThree},a.email=function(){b({method:"GET",url:"http://127.0.0.1:8000/directory/user/"+a.formData.contact_email,headers:{"Content-Type":"application/json"}}).success(function(){console.log("win"),$("#add-person").addClass("none"),$(".status_user").addClass("none"),a.isUserValid=function(){return!1}}).error(function(){console.log("fail"),$("#add-person").removeClass("none"),$(".status_user").removeClass("none"),a.isUserValid=function(){return!0}})},a.freightPost=function(){a.formData.needs_storage=a.add_needs_storage(),a.formData.other=a.otherInfo(),a.impo_form.$valid?b({method:"POST",url:"http://127.0.0.1:8000/directory/freightfirststep/",data:a.formData,headers:{"Content-Type":"application/json"}}).success(function(){c.url("/cotizar/exito")}).error(function(){}):(a.impo_form.submitted=!0,console.log("no valid"))}}]),angular.module("tucargaApp").directive("emailAvailable",["$http","$timeout",function(a){return{require:"ngModel",link:function(b,c,d,e){e.$parsers.push(function(b){return e.$setValidity("emailAvailable",!0),e.$valid&&(e.$setValidity("checkingEmail",!1),""!==b&&"undefined"!=typeof b?a.get("http://127.0.0.1:8000/directory/user/"+b).success(function(){console.log("win"),e.$setValidity("emailAvailable",!0),e.$setValidity("checkingEmail",!0)}).error(function(){console.log("fail"),e.$setValidity("emailAvailable",!1),e.$setValidity("checkingEmail",!0)}):(e.$setValidity("emailAvailable",!1),e.$setValidity("checkingEmail",!0))),b})}}}]);